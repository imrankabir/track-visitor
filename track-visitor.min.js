app=app??"Track Visitor",VISITS_KEY=VISITS_KEY??"track-visitor-visits";const pad=t=>t.toString().padStart(2,"0"),formatDate=(t,i="-")=>[t.getFullYear(),pad(t.getMonth()+1),pad(t.getDate())].join(i)+" "+[pad(t.getHours()),pad(t.getMinutes()),pad(t.getSeconds())].join(":");async function getVisitorIP(){try{let t=await fetch("https://api.ipify.org?format=json"),i=await t.json();return i.ip}catch(e){return console.error("Error fetching IP address:",e),"Unknown IP"}}async function trackVisitor(){let t=await getVisitorIP(),i=formatDate(new Date),e=JSON.parse(localStorage.getItem(VISITS_KEY))||[];e.push({ip:t,time:i,app}),localStorage.setItem(VISITS_KEY,JSON.stringify(e)),persistVisits()}async function persistVisits(){let t=new Headers;t.append("Content-Type","application/json");let i=await fetch("https://enabled-humpback-lively.ngrok-free.app/save-visits.php",{method:"POST",body:JSON.stringify(localStorage.getItem(VISITS_KEY)),headers:t});!0===i.ok&&200===i.status&&localStorage.setItem(VISITS_KEY,JSON.stringify([]))}trackVisitor();